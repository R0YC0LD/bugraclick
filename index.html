<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>CYBER BREACH: NETRUNNER</title>
    <style>
        /* --- RESET & CORE --- */
        :root {
            --bg: #030507;
            --glass: rgba(10, 20, 30, 0.85);
            --border: rgba(0, 243, 255, 0.2);
            --cyan: #00f3ff;
            --pink: #ff003c;
            --yellow: #fcee0a;
            --green: #00ff88;
            --font: 'Segoe UI', 'Roboto', monospace;
            --font-mono: 'Courier New', monospace;
        }
        * { box-sizing: border-box; user-select: none; -webkit-user-select: none; cursor: default; }
        
        body {
            margin: 0; background: var(--bg); color: #fff; font-family: var(--font);
            height: 100vh; overflow: hidden; display: flex; flex-direction: column;
        }

        /* --- BACKGROUND FX --- */
        .hex-bg {
            position: fixed; top: 0; left: 0; width: 100vw; height: 100vh; z-index: -1;
            background-image: 
                radial-gradient(circle at 50% 50%, rgba(0, 243, 255, 0.05) 0%, transparent 60%),
                linear-gradient(rgba(255, 255, 255, 0.02) 1px, transparent 1px),
                linear-gradient(90deg, rgba(255, 255, 255, 0.02) 1px, transparent 1px);
            background-size: 100% 100%, 40px 40px, 40px 40px;
            animation: bgPulse 10s infinite alternate;
        }
        @keyframes bgPulse { 0% { opacity: 0.5; } 100% { opacity: 1; } }

        /* Scanlines */
        .scanlines {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; z-index: 999;
            background: linear-gradient(to bottom, rgba(255,255,255,0), rgba(255,255,255,0) 50%, rgba(0,0,0,0.1) 50%, rgba(0,0,0,0.1));
            background-size: 100% 4px; opacity: 0.6;
        }

        /* --- LAYOUT --- */
        #app-container {
            display: flex; height: 100%; width: 100%; max-width: 1600px; margin: 0 auto;
        }

        /* SIDEBAR (NAV) */
        nav {
            width: 80px; background: rgba(0,0,0,0.5); border-right: 1px solid var(--border);
            display: flex; flex-direction: column; align-items: center; padding-top: 20px;
            z-index: 100; backdrop-filter: blur(10px);
        }
        .nav-btn {
            width: 50px; height: 50px; margin-bottom: 20px; border-radius: 8px;
            display: flex; justify-content: center; align-items: center;
            font-size: 1.5rem; color: #555; border: 1px solid transparent;
            cursor: pointer; transition: 0.3s;
        }
        .nav-btn:hover { color: var(--cyan); background: rgba(0, 243, 255, 0.1); }
        .nav-btn.active { color: var(--bg); background: var(--cyan); box-shadow: 0 0 15px var(--cyan); }

        /* MAIN CONTENT AREA */
        main { flex-grow: 1; position: relative; overflow: hidden; }

        .view-section {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            padding: 20px; display: none; opacity: 0; transition: opacity 0.3s;
            overflow-y: auto;
        }
        .view-section.active { display: block; opacity: 1; }

        /* --- HEADER STATS (Global) --- */
        header {
            position: absolute; top: 0; left: 80px; right: 0; height: 60px;
            display: flex; justify-content: space-between; align-items: center;
            padding: 0 30px; background: linear-gradient(180deg, rgba(0,0,0,0.8), transparent);
            z-index: 90; pointer-events: none;
        }
        .stat-group { display: flex; gap: 30px; }
        .stat-item { text-align: right; }
        .stat-label { font-size: 0.7rem; color: #888; letter-spacing: 1px; }
        .stat-val { font-size: 1.2rem; font-weight: bold; font-family: var(--font-mono); text-shadow: 0 0 10px currentColor; }
        .color-gold { color: var(--yellow); }
        .color-blue { color: var(--cyan); }

        /* --- TERMINAL VIEW --- */
        #view-terminal { display: flex; flex-direction: column; align-items: center; justify-content: center; height: 100%; }

        #hack-trigger {
            width: 280px; height: 280px; border-radius: 50%;
            border: 2px solid var(--cyan);
            background: radial-gradient(circle, rgba(0, 243, 255, 0.1) 0%, rgba(0,0,0,0.9) 70%);
            box-shadow: 0 0 30px rgba(0, 243, 255, 0.2);
            display: flex; flex-direction: column; justify-content: center; align-items: center;
            cursor: pointer; position: relative; transition: 0.1s; z-index: 10;
        }
        #hack-trigger:active { transform: scale(0.95); border-width: 5px; box-shadow: 0 0 60px var(--cyan); }
        #hack-trigger.danger { border-color: var(--pink); box-shadow: 0 0 40px var(--pink); animation: shake 0.3s infinite; }
        #hack-trigger::after {
            content: ''; position: absolute; inset: 10px; border-radius: 50%;
            border: 1px dashed rgba(255,255,255,0.3); animation: spin 10s linear infinite;
        }
        @keyframes spin { from {transform: rotate(0deg);} to {transform: rotate(360deg);} }

        .trigger-icon { font-size: 4rem; margin-bottom: 10px; filter: drop-shadow(0 0 10px var(--cyan)); pointer-events: none; }
        .trigger-text { font-size: 1rem; letter-spacing: 3px; font-weight: bold; color: #fff; pointer-events: none; }

        /* Bars */
        .bar-container { width: 400px; margin-top: 40px; }
        .bar-row { margin-bottom: 15px; }
        .bar-info { display: flex; justify-content: space-between; font-size: 0.8rem; margin-bottom: 5px; color: #aaa; }
        .progress-track { height: 8px; background: #111; border: 1px solid #333; position: relative; overflow: hidden; border-radius: 4px; }
        .progress-fill { height: 100%; width: 0%; transition: width 0.1s linear; }
        .fill-cyan { background: var(--cyan); box-shadow: 0 0 10px var(--cyan); }
        .fill-pink { background: var(--pink); box-shadow: 0 0 10px var(--pink); }

        /* Console Log (Mini) */
        #mini-console {
            position: absolute; bottom: 20px; left: 20px; width: 300px; height: 150px;
            background: rgba(0,0,0,0.8); border-left: 2px solid var(--green);
            padding: 10px; font-family: var(--font-mono); font-size: 0.75rem; color: var(--green);
            overflow: hidden; display: flex; flex-direction: column-reverse; pointer-events: none;
        }
        .log-line { margin-bottom: 2px; opacity: 0.8; }

        /* --- NETWORK VIEW (Levels) --- */
        #network-grid {
            display: grid; grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 20px; padding-top: 60px;
        }
        .net-card {
            background: var(--glass); border: 1px solid #333; padding: 20px;
            border-radius: 6px; position: relative; overflow: hidden; transition: 0.3s;
            cursor: pointer; display: flex; flex-direction: column; gap: 10px;
        }
        .net-card:hover { border-color: var(--cyan); transform: translateY(-5px); }
        .net-card.active { border-color: var(--green); box-shadow: inset 0 0 20px rgba(0, 255, 136, 0.2); }
        .net-card.locked { opacity: 0.5; filter: grayscale(1); pointer-events: none; border-color: #222; }
        
        .net-icon { font-size: 2rem; color: var(--cyan); }
        .net-title { font-weight: bold; font-size: 1.1rem; }
        .net-reward { color: var(--yellow); font-size: 0.9rem; font-family: var(--font-mono); }
        .net-sec { font-size: 0.8rem; color: var(--pink); }
        .lock-overlay { 
            position: absolute; inset: 0; background: rgba(0,0,0,0.6); 
            display: flex; justify-content: center; align-items: center; font-size: 3rem; color: #555;
        }

        /* --- MARKET VIEW --- */
        #market-list { display: flex; flex-direction: column; gap: 10px; padding-top: 60px; max-width: 800px; margin: 0 auto; }
        .shop-item {
            display: flex; align-items: center; background: var(--glass); border: 1px solid #333;
            padding: 15px; border-radius: 6px; transition: 0.2s; cursor: pointer;
        }
        .shop-item:hover { background: rgba(255, 255, 255, 0.05); border-color: var(--yellow); }
        .shop-item.disabled { opacity: 0.4; pointer-events: none; }
        
        .item-icon { width: 50px; height: 50px; background: #111; display: flex; justify-content: center; align-items: center; font-size: 1.5rem; margin-right: 20px; border-radius: 4px; border: 1px solid #333; }
        .item-info { flex-grow: 1; }
        .item-name { font-weight: bold; color: #fff; }
        .item-desc { font-size: 0.8rem; color: #888; }
        .item-cost { font-family: var(--font-mono); color: var(--yellow); font-weight: bold; }

        /* --- ANIMATIONS & FX --- */
        .particle {
            position: absolute; font-family: var(--font-mono); font-weight: bold; color: var(--cyan);
            pointer-events: none; animation: floatAndFade 1s forwards; font-size: 1.2rem; z-index: 99;
        }
        @keyframes floatAndFade { 0% { opacity: 1; transform: translateY(0); } 100% { opacity: 0; transform: translateY(-50px); } }

        @keyframes shake { 0% { transform: translate(1px, 1px) } 25% { transform: translate(-2px, -2px) } 50% { transform: translate(2px, 0px) } 75% { transform: translate(-1px, 2px) } }

        /* Glitch Class for Body */
        .glitch-mode { animation: glitchSkew 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94) both infinite; }
        @keyframes glitchSkew { 
            0% { transform: translate(0) } 
            20% { transform: translate(-2px, 2px) } 
            40% { transform: translate(-2px, -2px) } 
            60% { transform: translate(2px, 2px) } 
            80% { transform: translate(2px, -2px) } 
            100% { transform: translate(0) } 
        }

        /* Crash Overlay */
        #crash-screen {
            position: fixed; inset: 0; background: #000; z-index: 10000;
            display: none; flex-direction: column; justify-content: center; align-items: center;
            font-family: var(--font-mono);
        }
        .boot-line { color: var(--green); width: 600px; margin-bottom: 2px; font-size: 0.9rem; }

    </style>
</head>
<body>

    <div class="hex-bg"></div>
    <div class="scanlines"></div>

    <div id="app-container">
        
        <nav>
            <div class="nav-btn active" onclick="game.ui.switchTab('terminal')" title="Terminal">‚å®</div>
            <div class="nav-btn" onclick="game.ui.switchTab('network')" title="Aƒü Haritasƒ±">üåê</div>
            <div class="nav-btn" onclick="game.ui.switchTab('market')" title="Karaborsa">üõí</div>
            
            <div style="margin-top: auto; margin-bottom: 20px; font-size: 1.2rem; cursor: pointer;" onclick="game.audio.toggle()" id="mute-btn">üîá</div>
        </nav>

        <header>
            <div style="display: flex; align-items: center; gap: 10px;">
                <div style="font-weight: bold; letter-spacing: 2px;">HEDEF: <span id="target-name-display" style="color:var(--cyan)">Se√ßiliyor...</span></div>
            </div>
            <div class="stat-group">
                <div class="stat-item">
                    <div class="stat-label">SEVƒ∞YE</div>
                    <div class="stat-val color-blue"><span id="lvl-val">1</span></div>
                </div>
                <div class="stat-item">
                    <div class="stat-label">BAKƒ∞YE</div>
                    <div class="stat-val color-gold"><span id="money-val">0</span> ‚Çø</div>
                </div>
            </div>
        </header>

        <main>
            <div id="view-terminal" class="view-section active">
                <div id="hack-trigger" onmousedown="game.logic.hack(event)">
                    <div class="trigger-icon">‚ò†</div>
                    <div class="trigger-text">BAƒûLAN</div>
                    <div style="position:absolute; bottom:30px; font-size:0.7rem; color:#aaa;" id="cps-display">READY</div>
                </div>

                <div class="bar-container">
                    <div class="bar-row">
                        <div class="bar-info"><span>VERƒ∞ AKTARIMI</span><span id="breach-txt">0%</span></div>
                        <div class="progress-track"><div id="breach-bar" class="progress-fill fill-cyan"></div></div>
                    </div>
                    <div class="bar-row">
                        <div class="bar-info"><span style="color:var(--pink)">TESPƒ∞T Rƒ∞SKƒ∞</span><span id="risk-txt">0%</span></div>
                        <div class="progress-track"><div id="risk-bar" class="progress-fill fill-pink"></div></div>
                    </div>
                </div>

                <div style="position: absolute; top: 80px; width: 300px; text-align: center;">
                    <div style="font-size: 0.7rem; color: #666; margin-bottom: 5px;">SONRAKƒ∞ SEVƒ∞YE</div>
                    <div class="progress-track" style="height: 4px;"><div id="xp-bar" class="progress-fill" style="background: white;"></div></div>
                </div>
            </div>

            <div id="view-network" class="view-section">
                <h2 style="margin-top: 50px; font-size: 1.5rem; color: #fff;">Aƒû HARƒ∞TASI</h2>
                <div id="network-grid">
                    </div>
            </div>

            <div id="view-market" class="view-section">
                <h2 style="margin-top: 50px; font-size: 1.5rem; color: #fff;">KARABORSA YAZILIMLARI</h2>
                <div id="market-list">
                    </div>
            </div>
        </main>

        <div id="mini-console"></div>

    </div>

    <div id="crash-screen">
        <div style="color:var(--pink); font-size: 3rem; margin-bottom: 30px; text-shadow: 0 0 20px var(--pink);">CRITICAL_FAILURE</div>
        <div id="boot-log"></div>
    </div>

    <script>
        /* --- SES MOTORU (Synth) --- */
        const audio = {
            ctx: new (window.AudioContext || window.webkitAudioContext)(),
            muted: true,
            
            toggle() {
                if(this.ctx.state === 'suspended') this.ctx.resume();
                this.muted = !this.muted;
                document.getElementById('mute-btn').innerText = this.muted ? "üîá" : "üîä";
                if(!this.muted) this.playTone(100, 'sine', 0.1);
            },

            playTone(freq, type, dur, vol=0.1) {
                if(this.muted) return;
                const osc = this.ctx.createOscillator();
                const gain = this.ctx.createGain();
                osc.type = type;
                osc.frequency.setValueAtTime(freq, this.ctx.currentTime);
                gain.gain.setValueAtTime(vol, this.ctx.currentTime);
                gain.gain.exponentialRampToValueAtTime(0.01, this.ctx.currentTime + dur);
                osc.connect(gain);
                gain.connect(this.ctx.destination);
                osc.start();
                osc.stop(this.ctx.currentTime + dur);
            },

            sfx(type) {
                if(this.muted) return;
                const now = this.ctx.currentTime;
                if(type === 'click') {
                    this.playTone(600 + Math.random()*200, 'triangle', 0.1, 0.1);
                } else if(type === 'money') {
                    this.playTone(1200, 'square', 0.1, 0.05);
                    setTimeout(() => this.playTone(1800, 'square', 0.2, 0.05), 100);
                } else if(type === 'error') {
                    this.playTone(150, 'sawtooth', 0.3, 0.2);
                } else if(type === 'level') {
                    this.playTone(400, 'sine', 0.5, 0.2);
                    setTimeout(() => this.playTone(600, 'sine', 0.5, 0.2), 200);
                }
            }
        };

        /* --- OYUN VERƒ∞Sƒ∞ --- */
        const LEVELS = [
            { id: 0, name: "Yerel Aƒü", reqLvl: 1, sec: 1.0, reward: 50, icon: "üè†" },
            { id: 1, name: "Halka A√ßƒ±k Wi-Fi", reqLvl: 2, sec: 1.5, reward: 120, icon: "‚òï" },
            { id: 2, name: "ATM Aƒüƒ±", reqLvl: 3, sec: 2.2, reward: 350, icon: "üèß" },
            { id: 3, name: "Trafik Kontrol", reqLvl: 5, sec: 3.0, reward: 800, icon: "üö¶" },
            { id: 4, name: "Kurumsal Bulut", reqLvl: 8, sec: 4.5, reward: 2000, icon: "‚òÅÔ∏è" },
            { id: 5, name: "Merkez Bankasƒ±", reqLvl: 12, sec: 6.0, reward: 5000, icon: "üè¶" },
            { id: 6, name: "Askeri Uydu", reqLvl: 15, sec: 8.5, reward: 15000, icon: "üõ∞Ô∏è" },
            { id: 7, name: "Yapay Zeka √áekirdeƒüi", reqLvl: 20, sec: 12.0, reward: 50000, icon: "üß†" }
        ];

        const UPGRADES = [
            { id: 'cpu', name: 'CPU Overclock', desc: 'Tƒ±klama g√ºc√ºn√º arttƒ±rƒ±r.', base: 50, mult: 1.5, icon: '‚ö°' },
            { id: 'bot', name: 'Script Bot', desc: 'Otomatik sƒ±zma saƒülar.', base: 250, mult: 1.4, icon: 'ü§ñ' },
            { id: 'cool', name: 'Nitro Soƒüutma', desc: 'Riskin d√º≈ü√º≈ü√ºn√º hƒ±zlandƒ±rƒ±r.', base: 200, mult: 1.5, icon: '‚ùÑÔ∏è' },
            { id: 'stealth', name: 'VPN Ghost', desc: 'Tespit edilmeyi zorla≈ütƒ±rƒ±r.', base: 400, mult: 1.6, icon: 'üëª' },
            { id: 'miner', name: 'Kripto Rig', desc: 'Pasif gelir √ºretir.', base: 1000, mult: 1.4, icon: '‚õèÔ∏è' }
        ];

        /* --- OYUN MOTORU --- */
        const game = {
            state: {
                money: 0,
                xp: 0,
                lvl: 1,
                targetId: 0,
                breach: 0,
                risk: 0,
                crashed: false,
                stats: { clickPower: 2, autoHack: 0, riskCool: 2, stealth: 1, passive: 0 },
                upgrades: { cpu:0, bot:0, cool:0, stealth:0, miner:0 }
            },
            
            vars: {
                clicks: [],
                targetXP: 100,
            },

            init() {
                this.ui.initNetwork();
                this.ui.initMarket();
                this.ui.updateGlobal();
                
                // Game Loop
                setInterval(() => this.loop(), 1000/60);
                // Passive Income Loop
                setInterval(() => {
                    if(!this.state.crashed && this.state.stats.passive > 0) {
                        this.state.money += this.state.stats.passive;
                        this.ui.updateGlobal();
                    }
                }, 1000);
            },

            loop() {
                if(this.state.crashed) return;

                // Auto Hack
                if(this.state.stats.autoHack > 0) {
                    this.state.breach += this.state.stats.autoHack / 60;
                }

                // Risk Cooling
                if(this.state.risk > 0) {
                    this.state.risk -= this.state.stats.riskCool / 60;
                    if(this.state.risk < 0) this.state.risk = 0;
                }

                this.checkState();
                this.ui.updateBars();
            },

            logic: {
                hack(e) {
                    if(game.state.crashed) return;

                    // CPS Calc
                    const now = Date.now();
                    game.vars.clicks.push(now);
                    game.vars.clicks = game.vars.clicks.filter(t => now - t < 1000);
                    const cps = game.vars.clicks.length;
                    document.getElementById('cps-display').innerText = cps + " CPS";

                    const target = LEVELS[game.state.targetId];

                    // Breach
                    game.state.breach += game.state.stats.clickPower;

                    // Risk (Exponential Penalty based on CPS)
                    let penalty = (cps * cps) / 10;
                    game.state.risk += (target.sec + penalty) / game.state.stats.stealth;

                    // FX
                    audio.sfx('click');
                    game.ui.spawnParticle(e.clientX, e.clientY, `+${Math.floor(game.state.stats.clickPower)}`);
                    game.ui.animButton();

                    game.checkState();
                },

                buy(id) {
                    const upg = UPGRADES.find(u => u.id === id);
                    const cost = Math.floor(upg.base * Math.pow(upg.mult, game.state.upgrades[id]));
                    
                    if(game.state.money >= cost) {
                        game.state.money -= cost;
                        game.state.upgrades[id]++;
                        
                        // Apply Stats
                        if(id === 'cpu') game.state.stats.clickPower += 2;
                        if(id === 'bot') game.state.stats.autoHack += 5;
                        if(id === 'cool') game.state.stats.riskCool += 1;
                        if(id === 'stealth') game.state.stats.stealth += 0.2;
                        if(id === 'miner') game.state.stats.passive += 10;

                        audio.sfx('money');
                        game.ui.log(`Satƒ±n alƒ±ndƒ±: ${upg.name}`);
                        game.ui.updateGlobal();
                        game.ui.initMarket(); // Re-render prices
                    } else {
                        audio.sfx('error');
                    }
                }
            },

            checkState() {
                const target = LEVELS[this.state.targetId];

                // SUCCESS
                if(this.state.breach >= 1000) { // HP is fixed 1000 visual scale logic
                    this.state.breach = 0;
                    this.state.money += target.reward;
                    
                    // XP
                    this.state.xp += target.sec * 10;
                    if(this.state.xp >= this.vars.targetXP) {
                        this.state.lvl++;
                        this.state.xp = 0;
                        this.vars.targetXP = Math.floor(this.vars.targetXP * 1.5);
                        audio.sfx('level');
                        this.ui.log(`SEVƒ∞YE ATLANDI: ${this.state.lvl}`);
                        this.ui.initNetwork(); // Unlock new levels
                    }

                    audio.sfx('money');
                    this.ui.log(`Sƒ±zma Ba≈üarƒ±lƒ±: +${target.reward} ‚Çø`);
                    this.ui.updateGlobal();
                }

                // CRASH
                if(this.state.risk >= 100) {
                    this.crash();
                }

                // Visual Glitch if risk high
                if(this.state.risk > 80) document.body.classList.add('glitch-mode');
                else document.body.classList.remove('glitch-mode');
            },

            crash() {
                if(this.state.crashed) return;
                this.state.crashed = true;
                audio.sfx('error');
                
                const screen = document.getElementById('crash-screen');
                const log = document.getElementById('boot-log');
                screen.style.display = 'flex';
                log.innerHTML = '';
                document.body.classList.remove('glitch-mode');

                const lines = [
                    "SYSTEM_HALT: RISK_OVERFLOW",
                    "DUMPING MEMORY...",
                    "RESETTING NETWORK ADAPTERS...",
                    "LOADING SAFE KERNEL...",
                    "SYSTEM REBOOT..."
                ];

                let i = 0;
                const int = setInterval(() => {
                    if(i < lines.length) {
                        log.innerHTML += `<div class="boot-line">> ${lines[i]}</div>`;
                        audio.sfx('click');
                        i++;
                    } else {
                        clearInterval(int);
                        setTimeout(() => {
                            screen.style.display = 'none';
                            this.state.crashed = false;
                            this.state.risk = 50;
                            this.ui.log("Sistem yeniden ba≈ülatƒ±ldƒ±.", "var(--pink)");
                        }, 1000);
                    }
                }, 600);
            },

            ui: {
                switchTab(id) {
                    document.querySelectorAll('.view-section').forEach(el => el.classList.remove('active'));
                    document.querySelectorAll('.nav-btn').forEach(el => el.classList.remove('active'));
                    document.getElementById(`view-${id}`).classList.add('active');
                    // Simple active class toggle for nav buttons logic omitted for brevity, assumes order matches
                },

                updateGlobal() {
                    document.getElementById('money-val').innerText = Math.floor(game.state.money).toLocaleString();
                    document.getElementById('lvl-val').innerText = game.state.lvl;
                    document.getElementById('target-name-display').innerText = LEVELS[game.state.targetId].name;
                    
                    const xpPct = (game.state.xp / game.vars.targetXP) * 100;
                    document.getElementById('xp-bar').style.width = xpPct + "%";
                },

                updateBars() {
                    // Breach is fixed visual scale 0-1000
                    const bPct = Math.min(100, (game.state.breach / 1000) * 100);
                    document.getElementById('breach-bar').style.width = bPct + "%";
                    document.getElementById('breach-txt').innerText = Math.floor(bPct) + "%";

                    document.getElementById('risk-bar').style.width = Math.min(100, game.state.risk) + "%";
                    document.getElementById('risk-txt').innerText = Math.floor(game.state.risk) + "%";

                    const trigger = document.getElementById('hack-trigger');
                    if(game.state.risk > 80) trigger.classList.add('danger');
                    else trigger.classList.remove('danger');
                },

                initNetwork() {
                    const grid = document.getElementById('network-grid');
                    grid.innerHTML = "";
                    LEVELS.forEach(l => {
                        const locked = game.state.lvl < l.reqLvl;
                        const active = game.state.targetId === l.id;
                        const div = document.createElement('div');
                        div.className = `net-card ${locked ? 'locked' : ''} ${active ? 'active' : ''}`;
                        div.onclick = () => {
                            if(!locked) {
                                game.state.targetId = l.id;
                                game.state.breach = 0;
                                game.state.risk = 0;
                                game.ui.initNetwork();
                                game.ui.updateGlobal();
                                audio.sfx('click');
                            }
                        };
                        div.innerHTML = `
                            ${locked ? '<div class="lock-overlay">üîí</div>' : ''}
                            <div class="net-icon">${l.icon}</div>
                            <div class="net-title">${l.name}</div>
                            <div class="net-sec">G√ºvenlik: x${l.sec}</div>
                            <div class="net-reward">√ñd√ºl: ${l.reward} ‚Çø</div>
                        `;
                        grid.appendChild(div);
                    });
                },

                initMarket() {
                    const list = document.getElementById('market-list');
                    list.innerHTML = "";
                    UPGRADES.forEach(u => {
                        const cost = Math.floor(u.base * Math.pow(u.mult, game.state.upgrades[u.id]));
                        const div = document.createElement('div');
                        const canAfford = game.state.money >= cost;
                        div.className = `shop-item ${canAfford ? '' : 'disabled'}`;
                        div.onclick = () => game.logic.buy(u.id);
                        div.innerHTML = `
                            <div class="item-icon">${u.icon}</div>
                            <div class="item-info">
                                <div class="item-name">${u.name} (Lvl ${game.state.upgrades[u.id]})</div>
                                <div class="item-desc">${u.desc}</div>
                            </div>
                            <div class="item-cost">${cost} ‚Çø</div>
                        `;
                        list.appendChild(div);
                    });
                },

                log(msg, color="var(--green)") {
                    const con = document.getElementById('mini-console');
                    const line = document.createElement('div');
                    line.className = 'log-line';
                    line.style.color = color;
                    line.innerText = `> ${msg}`;
                    con.prepend(line);
                    if(con.children.length > 5) con.lastChild.remove();
                },

                spawnParticle(x, y, text) {
                    const el = document.createElement('div');
                    el.className = 'particle';
                    el.innerText = text;
                    el.style.left = (x - 20) + "px";
                    el.style.top = (y - 40) + "px";
                    document.body.appendChild(el);
                    setTimeout(() => el.remove(), 1000);
                },

                animButton() {
                    const btn = document.getElementById('hack-trigger');
                    btn.style.transform = "scale(0.95)";
                    setTimeout(() => btn.style.transform = "scale(1)", 50);
                }
            }
        };

        // Start
        game.init();

    </script>
</body>
</html>
